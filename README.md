# Slack Emoji Renderer

Slackワークスペースの絵文字を取得し、ブラウザ上で `:emoji:` 文字列を絵文字に置換するChrome拡張機能です。

## 機能

- Slack APIから絵文字データを取得
- ウェブページ内の `:emoji:` パターンを検出し、対応する絵文字画像に置換
- リアルタイム入力サジェスト機能（`:` を入力すると候補が表示）
- 高度なファジーマッチング検索（`:tbnugk:` で `:tabunugoku:` を検索可能）
- キーボードナビゲーション（上下矢印で選択、Enterで確定）
- ダークモード対応
- 拡張機能のON/OFF切り替え
- 設定画面でSlack APIトークンを管理

## インストール方法

### 開発版のインストール

1. このリポジトリをクローンまたはダウンロード
2. 依存関係をインストール
   ```bash
   yarn install
   ```
3. プロジェクトをビルド
   ```bash
   yarn build
   ```
4. Chrome拡張機能の管理画面を開く（`chrome://extensions/`）
5. 「デベロッパー モード」を有効にする
6. 「パッケージ化されていない拡張機能を読み込む」をクリック
7. ビルドされた `dist` フォルダを選択

## 使用方法

1. Slack API トークンを取得
   - Slack APIの[Your Apps](https://api.slack.com/apps)ページにアクセス
   - 新しいアプリを作成、または既存のアプリを選択
   - 「OAuth & Permissions」セクションで`emoji:read`スコープを追加
   - Bot User OAuth Tokenを取得

2. 拡張機能を設定
   - 拡張機能のアイコンをクリック
   - 取得したSlack APIトークンを入力
   - 「設定を保存」をクリック
   - 「絵文字を取得」をクリック

3. 使用開始
   - 任意のウェブサイトで `:emoji_name:` と入力
   - 対応する絵文字がある場合、自動的に絵文字画像に置換されます
   - テキスト入力中に `:` を入力すると絵文字のサジェストが表示されます
   - 上下矢印キーで選択、Enterキーで確定できます

## 開発

### 必要な環境

- Node.js 16+
- Yarn

### セットアップ

```bash
yarn install
```

### ビルド

```bash
yarn build
```

### 型チェック

```bash
yarn type-check
```

### フォーマット

```bash
yarn format
```

### リアルタイム開発

1. `yarn build` でビルド後、Chromeで拡張機能をリロード
2. または `yarn build --watch` でファイル変更を監視（tscの`--watch`オプション）

## 技術スタック

- TypeScript
- Chrome Extensions API (Manifest V3)
- Slack API
- CSS (ダークモード対応)
- MutationObserver (DOM変更監視)
- ファジーマッチングアルゴリズム

## 技術的特徴

- **ファジーマッチング**: 高度な文字列マッチングアルゴリズムにより、部分的な文字列でも絵文字を検索可能
- **リアルタイムサジェスト**: 入力と同時に絵文字候補を表示
- **パフォーマンス最適化**: WeakSetを使用した重複処理防止、効率的なDOM操作
- **アクセシビリティ**: キーボードナビゲーション完全対応
- **レスポンシブUI**: ダークモード自動対応、美しいアニメーション

## ライセンス

MIT